# Next.js 项目技术要点笔记

## 1. Next.js 基础架构

### 页面组件结构
- 使用 `app` 目录结构（App Router），这是 Next.js 13+ 的新特性
- 页面组件使用默认导出（`export default`）的方式定义
- 文件命名遵循 Next.js 约定：`page.tsx` 作为路由页面

### Image 组件
- 使用 Next.js 的 `Image` 组件替代原生 `<img>` 标签
- 特点：
  - 自动图片优化（尺寸、格式）
  - 懒加载
  - 防止布局偏移
  - 支持现代图片格式
- 必需的属性：
  - `src`: 图片源
  - `alt`: 无障碍访问描述
  - `width` 和 `height`: 尺寸定义

### 根布局组件 (layout.tsx)
- 作用：为整个应用提供统一的布局结构
- 特点：
  - 包含全局样式和字体配置
  - 定义网站元数据
  - 处理页面的通用结构
- 关键配置：
  ```tsx
  // 元数据配置
  export const metadata: Metadata = {
    title: "Cupid-Web",
    description: "Generated by create next app",
  };
  ```

### 字体优化
- 使用 Next.js 内置的字体系统
- Geist 字体家族：
  - Geist Sans：主要文本字体
  - Geist Mono：等宽字体，用于代码展示
- 性能优化：
  - 仅加载拉丁字符集（subsets: ["latin"]）
  - 使用 CSS 变量实现字体切换
  - 启用抗锯齿（antialiased）提升文本渲染质量

### 组件开发规范
1. 导航组件 (`NavLink.tsx`)
   - 使用 `"use client"` 指令标记客户端组件
   - 利用 `usePathname` 钩子实现路由匹配
   - Props 类型定义：
   ```typescript
   interface Props {
     href: string;   // 链接地址
     label: string;  // 链接文本
   }
   ```

2. 页面组件规范
   - 使用函数式组件
   - 默认导出页面组件
   - 添加 JSDoc 注释说明组件用途

## 2. UI 框架集成

### NextUI 使用要点
- 组件引入：
  ```typescript
  import {
    Button,
    Navbar,
    NavbarBrand,
    NavbarContent,
  } from "@nextui-org/react";
  ```
- 样式定制：
  ```typescript
  classNames={{
    item: [
      "text-xl",
      "text-white",
      "uppercase",
      "data-[active=true]:text-yellow-200",
    ],
  }}
  ```

### 图标集成
- 使用 `react-icons` 库
- 引入方式：
  ```typescript
  import { GiSelfLove } from "react-icons/gi";
  ```

## 3. Tailwind CSS 使用要点

### 布局技巧
1. Grid 布局：
   ```css
   grid grid-rows-[20px_1fr_20px]  /* 三行布局：顶部20px、自适应内容、底部20px */
   ```

2. Flex 布局：
   ```css
   flex flex-col  /* 垂直方向弹性布局 */
   flex-row      /* 水平方向弹性布局 */
   ```

3. 常用布局类：
   ```css
   flex min-h-screen items-center justify-center  /* 居中布局 */
   container mx-auto px-4 py-8  /* 容器布局 */
   ```

### 响应式设计
- 使用 `sm:` 前缀进行断点响应式设计
- 常见断点：
  - `sm`: >= 640px
  - `md`: >= 768px
  - `lg`: >= 1024px

### 暗色模式
- 使用 `dark:` 前缀定义暗色模式样式
- 例如：`dark:invert`、`dark:hover:bg-[#1a1a1a]`

### 间距与对齐
- `gap-{size}`: 定义元素间距
- `p-{size}`: 内边距
- `items-center`: 交叉轴居中
- `justify-center`: 主轴居中

### 文本与背景样式
```css
text-3xl font-bold text-center text-gray-800  /* 标题文本 */
bg-gradient-to-r from-pink-400 via-red-400 to-pink-600  /* 渐变背景 */
rounded-xl shadow-lg  /* 圆角和阴影 */
```

## 4. 最佳实践

### 可访问性（Accessibility）
- 使用语义化 HTML 标签（`main`、`footer`）
- 为图片提供 `alt` 属性
- 使用 `aria-hidden` 处理装饰性图标

### 链接安全
- 外部链接使用 `target="_blank"` 时，添加 `rel="noopener noreferrer"`
- 防止钓鱼攻击和性能问题

### 性能优化
- 使用 `priority` 属性优先加载关键图片
- 响应式设计确保在不同设备上的良好表现
- 使用 CSS 过渡效果提升用户体验：`transition-colors`

### 代码组织
- 组件逻辑清晰分层
- 样式类名语义化
- 适当的代码注释

### 代码质量
1. TypeScript 类型定义
   - 为组件 Props 定义接口
   - 使用精确的类型声明
   - 避免使用 any 类型

2. 注释规范
   - 使用 JSDoc 注释描述组件功能
   - 添加 TODO 标记待优化项
   - 保持注释的及时更新

### 安全性
1. 认证授权
   - 实现用户认证
   - 添加路由保护
   - 处理敏感信息

2. 数据验证
   - 表单输入验证
   - API 请求参数验证
   - 错误处理机制 

## 认证系统实现说明

### 技术栈
- Next.js 14 (App Router)
- React Hook Form - 表单管理
- Zod - 表单验证
- NextUI - UI组件库

### 目录结构 